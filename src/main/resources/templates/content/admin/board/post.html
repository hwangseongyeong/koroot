<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorator="layout/default">

<div layout:fragment="content">

    <section id="contact" class="contact">
        <div class="container" data-aos="fade-up">
            <div class="row">
                <div class="col-lg-12">
                    <h3><span>관리자 게시판</span></h3>
                </div>
            </div>
            <table id="table"
                   data-toggle="table"
                   data-pagination="true"
                   data-search="true"
                   data-show-columns="true"
                   data-halign="center"
                   data-url="/api/communication/noticeList"
            >
            </table>

        </div>
    </section>

    <div id="modalPost" class="modal fade" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">게시물 - 등록</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" data-bs-toggle="modal" data-bs-target="#modalPost" aria-label="Close"></button>
                </div>
                <div class="modal-body">

                    <table class="table table-bordered">
                        <tbody>
                        <tr>
                            <th class="w-25">게시물 TYPE</th>
                            <td class="w-auto">
                                <select id="postType" name="postType">
                                    <option value="">선택해주세요.</option>
                                    <option value="">이미지 게시판</option>
                                    <option value="">자료실 게시판</option>
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <th class="w-25">내용</th>
                            <td class="w-auto">
                                <textarea class="form-control" id="editor"></textarea>
                            </td>
                        </tr>
                        </tbody>
                    </table>

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" data-bs-toggle="modal" data-bs-target="#modalPost">Close</button>
                    <button type="button" class="btn btn-primary">Save changes</button>
                </div>
            </div>
        </div>
    </div>

    <th:block layout:fragment="script">
<!--        <script th:src="@{/js/communication/notice.js}"></script>-->
        <script src="https://cdn.ckeditor.com/ckeditor5/27.0.0/classic/ckeditor.js"></script>

        <script type="text/javascript">

            ClassicEditor
                .create( document.querySelector( '#editor' ),{
                    simpleUpload: {
                        uploadUrl: ''
                    }
                })
                .catch( error => {
                    console.error( error );
                } );


            $('#table').bootstrapTable('destroy').bootstrapTable({
                height: 578,
                locale: "ko-KR",
                columns: [
                    {
                        title: '게시글ID',
                        field: 'boardId',
                        width: 40,
                        align: 'center'
                    },{
                        title: '게시판 타입',
                        field: '2',
                        align: 'center'
                    },{
                        title: '게시판 카테고리',
                        field: 'category',
                        align: 'center'
                    },{
                        title: '제목',
                        field: 'title',
                        align: 'center'
                    },{
                        title: '등록일',
                        field: 'createdAt',
                        align: 'center'
                    },{
                        title: '조회수',
                        field: 'hits',
                        align: 'center'
                    }
                ]
            });
        </script>

        <script>
            $(function(){
                $('#table').on('click-row.bs.table', function (e, rowData) {
                    console.log(e,rowData);
                    $("#modalPost").modal("show");
                });
            });

        </script>
    </th:block>

    <style type="text/css">
        .page-link {
            color:#000000
        }
        .page-item.active .page-link{
            background-color:#48bd2b
        }
        .ck-editor__editable_inline {
            min-height: 400px;
        }
        .bootstrap-table .fixed-table-container .fixed-table-body {
            overflow: hidden;
            position: relative;
        }
    </style>
</div>

</html>